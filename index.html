<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Lotto Checker</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>ðŸ“¸ Lotto Checker</h1>
  <form id="lotto-form">
    <label for="image">Bild auswÃ¤hlen:</label>
    <input type="file" id="image" accept="image/*" required><br><br>

    <label for="numbers">Gezogene Zahlen (z.B. 3,7,12...):</label>
    <input type="text" id="numbers" placeholder="z.B. 4,8,15,16,23,42" required><br><br>

    <button type="submit">Senden</button>
  </form>

  <div id="result">
    <h2>Ergebnis:</h2>
    <img id="result-image" alt="Ergebnisbild wird hier angezeigt...">
    <pre id="json-output"></pre>
  </div>

<script>
  document.getElementById('lotto-form').addEventListener('submit', async function (e) {
    e.preventDefault();

    const form = new FormData();
    const imageInput = document.getElementById('image');
    const numbers = document.getElementById('numbers').value;

    form.append('image', imageInput.files[0]);
    form.append('numbers', numbers);

    try {
      const response = await fetch('https://lotto-checker-server.onrender.com/check_lotto', {
        method: 'POST',
        body: form
      });

      if (!response.ok || !response.headers.get('content-type')?.includes('image')) {
        throw new Error('Server hat kein Bild zurÃ¼ckgegeben');
      }

      const blob = await response.blob();
      const imgURL = URL.createObjectURL(blob);
      document.getElementById('result-image').src = imgURL;
      document.getElementById('json-output').textContent = "Bild erfolgreich verarbeitet!";
    } catch (err) {
      alert('Fehler bei der Antwort vom Server:\n' + err.message);
    }
  });
</script>
</body>
</html>
